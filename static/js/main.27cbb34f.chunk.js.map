{"version":3,"sources":["jsdos/JsDos.tsx","core/ZipExplorer.ts","dashboard/Dashboard.tsx","serviceWorker.ts","index.tsx"],"names":["require","Dos","window","JsDos","props","ref","useRef","useEffect","ciPromise","current","wdosboxUrl","then","runtime","fs","extract","url","main","ci","exit","react_default","a","createElement","resizeSensor","onResize","entries","length","console","log","contentRect","className","ZipExecutables","zipBlob","Promise","resolve","reject","outcome","zip","createReader","BlobReader","reader","getEntries","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","filename","value","toLocaleLowerCase","endsWith","push","err","return","close","e","Dashboard","_useState","useState","_useState2","Object","slicedToArray","error","setError","_useState3","_useState4","setReader","_useState5","_useState6","loadProgress","setLoadProgress","_useState7","_useState8","_setUrl","_useState9","_useState10","executables","setExecutables","_useState11","_useState12","executable","setExecutable","_useState13","_useState14","argsLine","setArgsLine","_useState15","_useState16","ready","setReady","fileName","parts","split","newArgs","forEach","part","index","join","setUrl","newUrl","URL","revokeObjectURL","chooseFileControl","style","color","fontWeight","borderBottom","dist_default","flexDirection","fileInput","disabled","text","onInputChange","files","currentTarget","file","FileReader","addEventListener","_ref","asyncToGenerator","regenerator_default","mark","_callee","blob","_files","_url","nodes","wrap","_context","prev","Blob","Uint8Array","result","sent","createObjectURL","id","label","icon","IconNames","PLAY","t0","finish","t1","stop","_x","apply","this","arguments","loaded","total","readAsArrayBuffer","spinner","size","intent","Intent","PRIMARY","display","executablesControl","tree","Classes","ELEVATION_1","contents","onNodeClick","node","argsControl","buttonGroup","INPUT","onChange","buttons","DANGER","onClick","jsdos","src_jsdos_JsDos","html","Boolean","location","hostname","match","ReactDOM","render","src_dashboard_Dashboard","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.27cbb34f.chunk.js","sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport { DosFactory } from \"js-dos\";\n\nimport \"./JsDos.css\";\nimport { ResizeSensor, IResizeEntry } from \"@blueprintjs/core\";\n\nrequire(\"js-dos\");\nconst Dos = (window as any).Dos as DosFactory;\n\nexport interface IJsDosProps {\n    url: string;\n}\n\nconst JsDos = (props: IJsDosProps) => {\n    const ref = useRef<HTMLCanvasElement>(null);\n\n    useEffect(() => {\n        if (ref !== null) {\n            const ciPromise = Dos(ref.current as HTMLCanvasElement, {\n                wdosboxUrl: \"/wdosbox/wdosbox.js\",\n            }).then((runtime) => {\n                return runtime.fs.extract(props.url).then(() => {\n                    return runtime.main([\"-c\", \"DIGGER.COM\"]);\n                });\n            });\n\n            return () => {\n                ciPromise.then(ci => ci.exit());\n            };\n        }\n    }, [ref, props.url]);\n\n    function onResize(entries: IResizeEntry[]) {\n        if (entries.length > 0) {\n            console.log(entries[entries.length - 1].contentRect);\n        }\n    };\n\n    return <ResizeSensor onResize={onResize}>\n            <canvas className=\"js-dos-canvas\" ref={ref} />\n        </ResizeSensor>;\n}\n\nexport default JsDos;","declare const zip: any;\n\nexport default function ZipExecutables(zipBlob: Blob) {\n    return new Promise<string[]>((resolve, reject) => {\n        const outcome: string[] = [];\n        zip.createReader(new zip.BlobReader(zipBlob), (reader: any) => {\n            reader.getEntries((entries: any) => {\n                for (const entry of entries) {\n                    const filename: string = entry.filename;\n                    if (filename.toLocaleLowerCase().endsWith(\".com\") || \n                        filename.toLocaleLowerCase().endsWith(\".exe\") ||\n                        filename.toLocaleLowerCase().endsWith(\".bat\")) {\n                        outcome.push(filename);\n                        break;\n                    }\n                }\n\n                reader.close();\n                resolve(outcome);\n            });\n        }, (e: any) => {\n            reject(\"Can't read ZIP file: \" + e);\n        });\n    });\n\n}","import { FileInput, H2, ProgressBar, Intent, H1, H3, Spinner, Tree, ITreeNode, Classes, Icon, Button, ButtonGroup } from \"@blueprintjs/core\";\n\nimport React, { useState, useEffect } from \"react\";\nimport JsDos from \"../jsdos/JsDos\";\n\nimport Flexbox from 'flexbox-react';\nimport \"./Dashboard.css\";\nimport { REDO, PLAY } from \"@blueprintjs/icons/lib/esm/generated/iconContents\";\nimport ZipExecutables from \"../core/ZipExplorer\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\n\nconst Dashboard: React.FC = () => {\n    const [error, setError] = useState<string>(\"\");\n    const [reader, setReader] = useState<FileReader|null>(null);\n    const [loadProgress, setLoadProgress] = useState<number>(0);\n    const [url, _setUrl] = useState<string | null>(null);\n\n    const [executables, setExecutables] = useState<ITreeNode[]>([]);\n    const [executable, setExecutable] = useState<string | null>(null);\n    const [argsLine, setArgsLine] = useState<string | null>(null);\n\n    const [ready, setReady] = useState<boolean>(false);\n\n    useEffect(() => {\n        const fileName = executable;\n\n        if (fileName === null) {\n            return;\n        }\n\n        if (fileName.length === 0 || fileName === \"N/A\") {\n            setArgsLine(\"\");\n            return;\n        }\n\n        const parts = fileName.split(\"/\");\n        const newArgs: string[] = [];\n        parts.forEach((part, index) => {\n            newArgs.push(\"\\\"-c\\\"\");\n            if (index < parts.length - 1) {\n                newArgs.push(\"\\\"cd \" + part + \"\\\"\");\n            } else {\n                newArgs.push(\"\\\"\" + part + \"\\\"\");\n            }\n        });\n        setArgsLine(newArgs.join(\", \"));\n    }, [executable]);\n    \n    const setUrl = (newUrl: string) => {\n        if (url !== null) {\n            URL.revokeObjectURL(url);\n        }\n\n        _setUrl(newUrl);\n    }\n\n    function onInputChange(e: any) {\n        const files = e.currentTarget.files as FileList;\n        if (files.length === 0) {\n            setReader(null);\n            return;\n        }\n\n        setError(\"\");\n\n        const file = files[0];\n        var reader = new FileReader();\n        reader.addEventListener('load', async (e) => {\n            const blob = new Blob([new Uint8Array(reader.result as ArrayBuffer)]);\n            try {\n                const files = await ZipExecutables(blob);\n                const url = URL.createObjectURL(blob);\n                setUrl(url);\n                \n\n                if (files.length === 1) {\n                    setExecutable(files[0])\n                } else if (files.length === 0) {\n                    setExecutable(\"N/A\");\n                } else {\n                    const nodes: ITreeNode[] = [];\n                    for (const next of files) {\n                        nodes.push({\n                            id: next,\n                            label: next,\n                            icon: IconNames.PLAY,\n                        });\n                    }\n                    setExecutables(nodes);\n                }\n            } catch (e) {\n                setError(e);\n                setReader(null);\n                setLoadProgress(0);\n            }\n        });\n        reader.addEventListener('progress', (e) => setLoadProgress(e.loaded / e.total));\n        reader.readAsArrayBuffer(file);\n        setReader(reader);\n    }\n\n    const chooseFileControl = <li>Upload \n        &nbsp;\n        <span style={{color: \"#D9822B\", fontWeight: \"bold\", borderBottom: \"2px solid #DB3737\"}}>ZIP</span>\n        &nbsp;\n        archive of program\n        <Flexbox className=\"instructions-control\" flexDirection=\"row\">\n            <FileInput disabled={reader !== null} text=\"Choose file...\" onInputChange={onInputChange} />\n            &nbsp;&nbsp;\n            <Spinner size={16} intent={Intent.PRIMARY} value={loadProgress} />\n        </Flexbox>\n        <span style={{color: \"#DB3737\", display: (error.length === 0 ? \"none\" : \"block\") }}>*&nbsp;{error}</span>\n    </li>;\n\n    const executablesControl = <li style={(executables.length === 0 && executable === null) ? {display: \"none\"} : {}}>\n        Select executable:\n        <div style={executable === null ? {} : {display: \"none\"}} className=\"instructions-control\">\n            <Tree className={Classes.ELEVATION_1} contents={executables} onNodeClick={(node) => setExecutable(node.id + \"\")} />\n        </div>\n        <div style={executable === null ? {display: \"none\"} : {}} className=\"instructions-control\">\n            <span style={{color: \"#D9822B\", fontWeight: \"bold\"}}>{executable}</span>\n        </div>\n    </li>;\n\n    const argsControl = <li style={argsLine === null ? {display: \"none\"} : {}}>\n        Check command line and \n        &nbsp;\n        <span style={{color: \"#D9822B\", fontWeight: \"bold\", borderBottom: \"2px solid #DB3737\"}}>RUN</span>\n        &nbsp;\n        <ButtonGroup className=\"instructions-control\">\n            <input className={Classes.INPUT} value={argsLine + \"\"} onChange={(e) => setArgsLine(e.currentTarget.value)} />\n            <Button intent={Intent.DANGER} text=\"Run\" onClick={() => setReady(true)} />\n        </ButtonGroup>\n    </li>;\n\n    const jsdos = <li style={ready ? {} : {display: \"none\"}}>\n        Now PLAY!\n        <JsDos url={url + \"\"}/>\n    </li>\n\n    return <Flexbox flexDirection=\"column\" className=\"dashboard\">\n        <H1>Dosify me!</H1>\n        <H3>Instructions</H3>\n        <ol className=\"instructions-ol\">\n            {chooseFileControl}\n            {executablesControl}\n            {argsControl}\n            {jsdos}\n        </ol>\n    </Flexbox>;\n};\n\nexport default Dashboard;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport Dashboard from \"./dashboard/Dashboard\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\n\nReactDOM.render(<Dashboard />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}